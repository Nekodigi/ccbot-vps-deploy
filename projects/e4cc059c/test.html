<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat - 機能テスト</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            max-width: 1000px;
            margin: 2rem auto;
            padding: 0 1rem;
            background: #f8fafc;
        }
        .test-container {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #1e293b;
            margin-bottom: 1.5rem;
        }
        .test-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: #f8fafc;
            border-radius: 0.5rem;
        }
        .test-section h2 {
            color: #2563eb;
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }
        .test-item {
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            background: white;
            border-left: 3px solid #e2e8f0;
            border-radius: 0.25rem;
        }
        .test-item.pass {
            border-left-color: #10b981;
        }
        .test-item.fail {
            border-left-color: #ef4444;
        }
        .test-item.pending {
            border-left-color: #f59e0b;
        }
        .status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 0.25rem;
            font-size: 0.875rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }
        .status.pass {
            background: #d1fae5;
            color: #065f46;
        }
        .status.fail {
            background: #fee2e2;
            color: #991b1b;
        }
        .status.pending {
            background: #fef3c7;
            color: #92400e;
        }
        button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-size: 1rem;
            cursor: pointer;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
        button:hover {
            background: #1d4ed8;
        }
        #testResults {
            margin-top: 1rem;
        }
        .link {
            display: inline-block;
            color: #2563eb;
            text-decoration: none;
            margin-top: 1rem;
            padding: 0.5rem 1rem;
            border: 2px solid #2563eb;
            border-radius: 0.5rem;
        }
        .link:hover {
            background: #2563eb;
            color: white;
        }
    </style>

    <!-- Open Graph / OGP - Auto-generated by Bot -->
    <meta property="og:title" content="「AIと対話するPWAアプリ」">
    <meta property="og:description" content="「AIと対話するPWAアプリ」">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://vps.nekodigi.com/ccbot/projects/e4cc059c">
    <meta property="og:image" content="https://vps.nekodigi.com/ccbot/projects/e4cc059c/thumbnail.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <!-- Twitter Card - Auto-generated by Bot -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="「AIと対話するPWAアプリ」">
    <meta name="twitter:description" content="「AIと対話するPWAアプリ」">
    <meta name="twitter:image" content="https://vps.nekodigi.com/ccbot/projects/e4cc059c/thumbnail.png">
  </head>
<body>
    <div class="test-container">
        <h1>AI Chat アプリケーション - 機能テスト</h1>

        <div class="test-section">
            <h2>基本機能チェックリスト</h2>
            <div class="test-item pass">
                <strong>HTML構造:</strong> index.html作成完了
                <span class="status pass">✓ PASS</span>
            </div>
            <div class="test-item pass">
                <strong>CSS設計:</strong> style.css作成完了（日本のビジネスデザイン準拠）
                <span class="status pass">✓ PASS</span>
            </div>
            <div class="test-item pass">
                <strong>JavaScript実装:</strong> app.js作成完了（Firebase AI Logic SDK統合）
                <span class="status pass">✓ PASS</span>
            </div>
            <div class="test-item pass">
                <strong>PWA対応:</strong> manifest.json, service worker作成完了
                <span class="status pass">✓ PASS</span>
            </div>
            <div class="test-item pass">
                <strong>SEOメタタグ:</strong> OGP, Twitter Card設定完了
                <span class="status pass">✓ PASS</span>
            </div>
            <div class="test-item pass">
                <strong>相対パス:</strong> すべてのリソース参照が相対パス使用
                <span class="status pass">✓ PASS</span>
            </div>
        </div>

        <div class="test-section">
            <h2>Firebase設定チェック</h2>
            <div class="test-item pass">
                <strong>Firebase Config:</strong> 指定された設定を使用
                <span class="status pass">✓ PASS</span>
            </div>
            <div class="test-item pass">
                <strong>AI Logic SDK:</strong> gemini-2.5-flash モデル使用
                <span class="status pass">✓ PASS</span>
            </div>
            <div class="test-item pass">
                <strong>バックエンド:</strong> GoogleAIBackend設定完了
                <span class="status pass">✓ PASS</span>
            </div>
        </div>

        <div class="test-section">
            <h2>機能テスト項目</h2>
            <div class="test-item pending">
                <strong>AI応答テスト:</strong> メッセージ送信と応答受信
                <span class="status pending">⏳ 手動確認必要</span>
            </div>
            <div class="test-item pending">
                <strong>チャット履歴:</strong> 会話コンテキストの維持
                <span class="status pending">⏳ 手動確認必要</span>
            </div>
            <div class="test-item pending">
                <strong>エラーハンドリング:</strong> ネットワークエラー時の挙動
                <span class="status pending">⏳ 手動確認必要</span>
            </div>
            <div class="test-item pending">
                <strong>レスポンシブ対応:</strong> モバイル・デスクトップ表示
                <span class="status pending">⏳ 手動確認必要</span>
            </div>
            <div class="test-item pending">
                <strong>PWAインストール:</strong> ホーム画面への追加
                <span class="status pending">⏳ 手動確認必要</span>
            </div>
        </div>

        <div class="test-section">
            <h2>自動テスト実行</h2>
            <button onclick="runBasicTests()">基本機能テスト実行</button>
            <button onclick="runPWATests()">PWA機能テスト実行</button>
            <button onclick="runAllTests()">すべてのテスト実行</button>
            <div id="testResults"></div>
        </div>

        <div class="test-section">
            <h2>手動テストガイド</h2>
            <ol style="line-height: 2;">
                <li>アプリケーションを開く</li>
                <li>ステータスが「接続完了」になることを確認</li>
                <li>テキストエリアにメッセージを入力</li>
                <li>送信ボタンをクリックまたはEnterキーで送信</li>
                <li>AIからの応答が表示されることを確認</li>
                <li>複数回のやり取りで会話が続くことを確認</li>
                <li>レスポンシブデザインを確認（モバイル/デスクトップ）</li>
                <li>PWAとしてインストールできることを確認</li>
            </ol>
        </div>

        <a href="./index.html" class="link">→ アプリケーションを開く</a>
    </div>

    <script>
        function addTestResult(text, status) {
            const results = document.getElementById('testResults');
            const item = document.createElement('div');
            item.className = `test-item ${status}`;
            item.innerHTML = `<strong>${text}</strong> <span class="status ${status}">${status === 'pass' ? '✓ PASS' : status === 'fail' ? '✗ FAIL' : '⏳ PENDING'}</span>`;
            results.appendChild(item);
        }

        function clearResults() {
            document.getElementById('testResults').innerHTML = '';
        }

        async function runBasicTests() {
            clearResults();
            addTestResult('ファイル構造チェック中...', 'pending');

            // HTML存在チェック
            try {
                const htmlResponse = await fetch('./index.html');
                addTestResult('index.html読み込み: ' + htmlResponse.status, htmlResponse.ok ? 'pass' : 'fail');
            } catch (e) {
                addTestResult('index.html読み込みエラー', 'fail');
            }

            // CSS存在チェック
            try {
                const cssResponse = await fetch('./style.css');
                addTestResult('style.css読み込み: ' + cssResponse.status, cssResponse.ok ? 'pass' : 'fail');
            } catch (e) {
                addTestResult('style.css読み込みエラー', 'fail');
            }

            // JS存在チェック
            try {
                const jsResponse = await fetch('./app.js');
                addTestResult('app.js読み込み: ' + jsResponse.status, jsResponse.ok ? 'pass' : 'fail');
            } catch (e) {
                addTestResult('app.js読み込みエラー', 'fail');
            }
        }

        async function runPWATests() {
            clearResults();

            // Manifest存在チェック
            try {
                const manifestResponse = await fetch('./manifest.json');
                addTestResult('manifest.json読み込み: ' + manifestResponse.status, manifestResponse.ok ? 'pass' : 'fail');

                if (manifestResponse.ok) {
                    const manifest = await manifestResponse.json();
                    addTestResult('Manifest name: ' + manifest.name, 'pass');
                    addTestResult('Manifest start_url: ' + manifest.start_url, 'pass');
                }
            } catch (e) {
                addTestResult('manifest.json読み込みエラー', 'fail');
            }

            // Service Worker存在チェック
            try {
                const swResponse = await fetch('./sw.js');
                addTestResult('sw.js読み込み: ' + swResponse.status, swResponse.ok ? 'pass' : 'fail');
            } catch (e) {
                addTestResult('sw.js読み込みエラー', 'fail');
            }

            // Service Worker登録チェック
            if ('serviceWorker' in navigator) {
                addTestResult('Service Worker API利用可能', 'pass');
            } else {
                addTestResult('Service Worker API利用不可', 'fail');
            }
        }

        async function runAllTests() {
            await runBasicTests();
            await new Promise(resolve => setTimeout(resolve, 500));
            await runPWATests();
        }
    </script>
</body>
</html>
