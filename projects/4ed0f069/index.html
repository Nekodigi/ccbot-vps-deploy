<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>量子コンピュータシミュレーター | Quantum Computing Simulator</title>
    <meta name="description" content="ブラウザで動作する量子コンピュータシミュレーター。量子ビット、量子ゲート、ブロッホ球の可視化を体験できます。">
    <meta name="keywords" content="量子コンピュータ,量子シミュレーター,量子ゲート,ブロッホ球,Quantum Computing">

    <!-- OGP -->
    <meta property="og:title" content="量子コンピュータシミュレーター">
    <meta property="og:description" content="ブラウザで動作する量子コンピュータシミュレーター">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://vps.nekodigi.com/ccbot/projects/4ed0f069">
    <meta property="og:image" content="https://vps.nekodigi.com/ccbot/projects/4ed0f069/icon-512.png">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="量子コンピュータシミュレーター">
    <meta name="twitter:description" content="ブラウザで動作する量子コンピュータシミュレーター">
    <meta name="twitter:image" content="https://vps.nekodigi.com/ccbot/projects/4ed0f069/icon-512.png">

    <!-- PWA -->
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#1a1a2e">
    <link rel="apple-touch-icon" href="./icon-192.png">

    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>量子コンピュータシミュレーター</h1>
            <p class="subtitle">Quantum Computing Simulator</p>
        </header>

        <main class="main-content">
            <!-- 量子ビット制御パネル -->
            <section class="control-panel">
                <h2>量子回路設計</h2>
                <div class="qubit-controls">
                    <div class="control-group">
                        <label for="qubit-count">量子ビット数:</label>
                        <select id="qubit-count">
                            <option value="1" selected>1 qubit</option>
                            <option value="2">2 qubits</option>
                            <option value="3">3 qubits</option>
                        </select>
                    </div>
                    <button id="reset-circuit" class="btn btn-secondary">回路をリセット</button>
                </div>

                <div class="gates-section">
                    <h3>量子ゲート</h3>
                    <div class="gate-buttons">
                        <button class="gate-btn" data-gate="H" title="Hadamardゲート - 重ね合わせ状態を作成">H</button>
                        <button class="gate-btn" data-gate="X" title="パウリXゲート - NOT操作">X</button>
                        <button class="gate-btn" data-gate="Y" title="パウリYゲート">Y</button>
                        <button class="gate-btn" data-gate="Z" title="パウリZゲート">Z</button>
                        <button class="gate-btn" data-gate="S" title="Sゲート - 位相回転">S</button>
                        <button class="gate-btn" data-gate="T" title="Tゲート - π/8回転">T</button>
                        <button class="gate-btn" data-gate="RX" title="X軸回転ゲート">Rx</button>
                        <button class="gate-btn" data-gate="RY" title="Y軸回転ゲート">Ry</button>
                        <button class="gate-btn" data-gate="RZ" title="Z軸回転ゲート">Rz</button>
                        <button class="gate-btn" data-gate="CNOT" title="CNOTゲート - 制御NOT">CNOT</button>
                    </div>
                </div>

                <div class="angle-control" id="angle-control" style="display: none;">
                    <label for="rotation-angle">回転角度 (ラジアン):</label>
                    <input type="range" id="rotation-angle" min="0" max="6.28" step="0.01" value="1.57">
                    <span id="angle-value">1.57</span>
                </div>
            </section>

            <!-- 量子回路ビューア -->
            <section class="circuit-section">
                <h2>量子回路</h2>
                <div id="circuit-display" class="circuit-display">
                    <canvas id="circuit-canvas"></canvas>
                </div>
                <button id="run-circuit" class="btn btn-primary">回路を実行</button>
            </section>

            <!-- ブロッホ球可視化 -->
            <section class="visualization-section">
                <h2>ブロッホ球可視化</h2>
                <div id="bloch-sphere" class="bloch-sphere-container">
                    <canvas id="bloch-canvas"></canvas>
                </div>
                <div class="state-info">
                    <h3>量子状態</h3>
                    <div id="state-vector" class="state-vector"></div>
                </div>
            </section>

            <!-- 測定結果 -->
            <section class="measurement-section">
                <h2>測定</h2>
                <button id="measure-btn" class="btn btn-primary">測定を実行</button>
                <div id="measurement-results" class="measurement-results">
                    <canvas id="measurement-chart"></canvas>
                </div>
            </section>

            <!-- AI解説機能 -->
            <section class="ai-section">
                <h2>AI解説</h2>
                <div class="ai-controls">
                    <button id="explain-state" class="btn btn-secondary">現在の状態を解説</button>
                    <button id="explain-gates" class="btn btn-secondary">ゲート操作を解説</button>
                </div>
                <div id="ai-explanation" class="ai-explanation"></div>
            </section>
        </main>
    </div>

    <!-- Firebase -->
    <script type="module" src="./firebase-config.js"></script>
    <script type="module" src="./quantum-simulator.js"></script>
    <script type="module" src="./bloch-sphere.js"></script>
    <script type="module" src="./circuit-renderer.js"></script>
    <script type="module" src="./app.js"></script>

    <script>
        // Service Worker登録
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js')
                .then(reg => console.log('Service Worker registered'))
                .catch(err => console.log('Service Worker registration failed:', err));
        }
    </script>
</body>
</html>
